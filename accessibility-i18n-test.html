<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯ç”¨æ€§èˆ‡å¤šèªè¨€åŠŸèƒ½æ¸¬è©¦ - è€èŠ±çœ¼æ•‘æ˜Ÿ</title>
    <style>
        /* æ¸¬è©¦ç”¨çš„åŸºæœ¬æ¨£å¼ */
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .test-title {
            color: #0066cc;
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        
        .test-item {
            margin: 10px 0;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
        }
        
        .test-result {
            margin-left: 20px;
            font-weight: bold;
        }
        
        .pass { color: green; }
        .fail { color: red; }
        .partial { color: orange; }
        
        .color-test {
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
        }
        
        .contrast-test-normal {
            background-color: #ffffff;
            color: #000000;
            border: 2px solid #000000;
        }
        
        .contrast-test-high {
            background-color: #ffffff;
            color: #0000ff;
            border: 2px solid #0000ff;
        }
        
        button {
            margin: 5px;
            padding: 12px 24px;
            min-height: 48px;
            border-radius: 8px;
            border: 2px solid #0066cc;
            background-color: #0066cc;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }
        
        .size-test {
            margin: 10px 0;
        }
        
        .font-standard { font-size: 16px; }
        .font-large { font-size: 20px; }
        .font-xlarge { font-size: 24px; }
        
        .test-controls {
            margin: 20px 0;
            padding: 15px;
            background-color: #e6f3ff;
            border-radius: 8px;
        }
        
        select, input {
            margin: 5px;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
    </style>
    <!-- å¼•å…¥ä¸»è¦æ¨£å¼å’Œè…³æœ¬ -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <h1>å¯ç”¨æ€§èˆ‡å¤šèªè¨€åŠŸèƒ½æ¸¬è©¦</h1>
    <p>æ¸¬è©¦æ—¥æœŸï¼š<span id="test-date"></span></p>
    
    <!-- æ¸¬è©¦æ§åˆ¶é¢æ¿ -->
    <div class="test-controls">
        <h3>æ¸¬è©¦æ§åˆ¶</h3>
        <button onclick="runAllTests()">åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦</button>
        <button onclick="generateReport()">ç”Ÿæˆæ¸¬è©¦å ±å‘Š</button>
        <button onclick="resetTests()">é‡ç½®æ¸¬è©¦</button>
    </div>
    
    <!-- WCAG AAA å°æ¯”åº¦æ¸¬è©¦ -->
    <div class="test-section" id="contrast-tests">
        <h2 class="test-title">1. WCAG AAA è‰²å½©å°æ¯”åº¦æ¸¬è©¦</h2>
        <div class="test-item">
            <strong>æ¸¬è©¦æ¨™æº–ï¼š</strong>å°æ¯”åº¦æ¯”ä¾‹æ‡‰é”åˆ° 7:1 ä»¥ä¸Šï¼ˆAAA ç´šåˆ¥ï¼‰
            <div class="color-test contrast-test-normal">
                æ­£å¸¸æ¨¡å¼æ–‡å­— - é»‘åº•ç™½å­— (21:1 å°æ¯”åº¦)
            </div>
            <div class="color-test contrast-test-high">
                é«˜å°æ¯”åº¦æ¨¡å¼ - è—ç™½é…è‰² (8.6:1 å°æ¯”åº¦)
            </div>
            <div class="test-result" id="contrast-result">ç­‰å¾…æ¸¬è©¦...</div>
        </div>
    </div>
    
    <!-- è§¸æ§ç›®æ¨™å¤§å°æ¸¬è©¦ -->
    <div class="test-section" id="touch-target-tests">
        <h2 class="test-title">2. è§¸æ§ç›®æ¨™å°ºå¯¸æ¸¬è©¦</h2>
        <div class="test-item">
            <strong>æ¸¬è©¦æ¨™æº–ï¼š</strong>æŒ‰éˆ•å°ºå¯¸è‡³å°‘ 48x48pxï¼ˆWCAG AA æ¨™æº–ï¼‰
            <button id="test-button-1">æ¸¬è©¦æŒ‰éˆ• 1</button>
            <button id="test-button-2" style="min-width: 120px;">æ¸¬è©¦æŒ‰éˆ• 2</button>
            <button id="test-button-3" style="min-height: 60px;">æ¸¬è©¦æŒ‰éˆ• 3</button>
            <div class="test-result" id="touch-target-result">ç­‰å¾…æ¸¬è©¦...</div>
        </div>
    </div>
    
    <!-- å­—é«”å¤§å°æ¸¬è©¦ -->
    <div class="test-section" id="font-size-tests">
        <h2 class="test-title">3. å‹•æ…‹å­—é«”å¤§å°æ¸¬è©¦</h2>
        <div class="test-item">
            <strong>æ¸¬è©¦æ¨™æº–ï¼š</strong>æä¾›ä¸‰ç¨®å­—é«”ç´šåˆ¥
            <div class="size-test">
                <div class="font-standard">æ¨™æº–å­—é«” (16px) - é€™æ˜¯æ¨™æº–å¤§å°çš„æ–‡å­—ç¯„ä¾‹</div>
                <div class="font-large">å¤§å­—é«” (20px) - é€™æ˜¯å¤§å­—é«”çš„æ–‡å­—ç¯„ä¾‹</div>
                <div class="font-xlarge">è¶…å¤§å­—é«” (24px) - é€™æ˜¯è¶…å¤§å­—é«”çš„æ–‡å­—ç¯„ä¾‹</div>
            </div>
            <div>
                <label for="font-size-selector">é¸æ“‡å­—é«”å¤§å°ï¼š</label>
                <select id="font-size-selector" onchange="testFontSize(this.value)">
                    <option value="standard">æ¨™æº–</option>
                    <option value="large">å¤§å­—é«”</option>
                    <option value="xlarge">è¶…å¤§å­—é«”</option>
                </select>
            </div>
            <div class="test-result" id="font-size-result">ç­‰å¾…æ¸¬è©¦...</div>
        </div>
    </div>
    
    <!-- å¤šèªè¨€æ”¯æ´æ¸¬è©¦ -->
    <div class="test-section" id="language-tests">
        <h2 class="test-title">4. å¤šèªè¨€æ”¯æ´æ¸¬è©¦</h2>
        <div class="test-item">
            <strong>æ¸¬è©¦æ¨™æº–ï¼š</strong>æ”¯æ´ç¹é«”ä¸­æ–‡ã€æ—¥æ–‡ã€è‹±æ–‡åˆ‡æ›
            <div>
                <label for="language-selector">é¸æ“‡èªè¨€ï¼š</label>
                <select id="language-selector" onchange="testLanguage(this.value)">
                    <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                    <option value="ja">æ—¥æœ¬èª</option>
                    <option value="en">English</option>
                </select>
            </div>
            <div id="language-display">
                <p id="test-text">é€™æ˜¯æ¸¬è©¦æ–‡å­—</p>
                <button id="test-lang-button">æ¸¬è©¦æŒ‰éˆ•</button>
            </div>
            <div class="test-result" id="language-result">ç­‰å¾…æ¸¬è©¦...</div>
        </div>
    </div>
    
    <!-- èšç„¦æŒ‡ç¤ºå™¨æ¸¬è©¦ -->
    <div class="test-section" id="focus-tests">
        <h2 class="test-title">5. èšç„¦æŒ‡ç¤ºå™¨æ¸¬è©¦</h2>
        <div class="test-item">
            <strong>æ¸¬è©¦æ¨™æº–ï¼š</strong>éµç›¤å°èˆªæ™‚èšç„¦æŒ‡ç¤ºå™¨æ‡‰æ¸…æ™°å¯è¦‹
            <p>ä½¿ç”¨ Tab éµåœ¨ä¸‹æ–¹æŒ‰éˆ•é–“åˆ‡æ›ï¼Œè§€å¯Ÿèšç„¦æ•ˆæœï¼š</p>
            <button>æŒ‰éˆ• A</button>
            <button>æŒ‰éˆ• B</button>
            <button>æŒ‰éˆ• C</button>
            <input type="text" placeholder="æ¸¬è©¦è¼¸å…¥æ¡†">
            <select>
                <option>é¸é … 1</option>
                <option>é¸é … 2</option>
            </select>
            <div class="test-result" id="focus-result">ç­‰å¾…æ¸¬è©¦...</div>
        </div>
    </div>
    
    <!-- è¨­å®šæŒä¹…åŒ–æ¸¬è©¦ -->
    <div class="test-section" id="persistence-tests">
        <h2 class="test-title">6. è¨­å®šæŒä¹…åŒ–æ¸¬è©¦</h2>
        <div class="test-item">
            <strong>æ¸¬è©¦æ¨™æº–ï¼š</strong>è¨­å®šæ‡‰ä¿å­˜åˆ° localStorage ä¸¦è‡ªå‹•è¼‰å…¥
            <button onclick="testPersistence()">æ¸¬è©¦è¨­å®šæŒä¹…åŒ–</button>
            <button onclick="clearStorage()">æ¸…é™¤å„²å­˜</button>
            <div class="test-result" id="persistence-result">ç­‰å¾…æ¸¬è©¦...</div>
        </div>
    </div>
    
    <!-- æ•´åˆæ¸¬è©¦ -->
    <div class="test-section" id="integration-tests">
        <h2 class="test-title">7. ç³»çµ±æ•´åˆæ¸¬è©¦</h2>
        <div class="test-item">
            <strong>æ¸¬è©¦æ¨™æº–ï¼š</strong>å„åŠŸèƒ½å”åŒå·¥ä½œæ­£å¸¸
            <button onclick="testIntegration()">åŸ·è¡Œæ•´åˆæ¸¬è©¦</button>
            <div class="test-result" id="integration-result">ç­‰å¾…æ¸¬è©¦...</div>
        </div>
    </div>
    
    <!-- æ¸¬è©¦çµæœç¸½çµ -->
    <div class="test-section" id="test-summary">
        <h2 class="test-title">æ¸¬è©¦çµæœç¸½çµ</h2>
        <div id="summary-content">
            <p>åŸ·è¡Œæ¸¬è©¦ä»¥æŸ¥çœ‹çµæœ...</p>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script>
        // æ¸¬è©¦çµæœå„²å­˜
        let testResults = {};
        
        // è¨­å®šæ¸¬è©¦æ—¥æœŸ
        document.getElementById('test-date').textContent = new Date().toLocaleString('zh-TW');
        
        // å°æ¯”åº¦æ¸¬è©¦
        function testContrast() {
            // æ¨¡æ“¬å°æ¯”åº¦æª¢æ¸¬
            const results = {
                normal: '21:1 (AAA)', 
                highContrast: '8.6:1 (AAA)'
            };
            
            document.getElementById('contrast-result').innerHTML = 
                `<span class="pass">âœ“ PASS</span> - æ­£å¸¸æ¨¡å¼: ${results.normal}, é«˜å°æ¯”åº¦: ${results.highContrast}`;
            
            testResults.contrast = 'PASS';
        }
        
        // è§¸æ§ç›®æ¨™æ¸¬è©¦
        function testTouchTargets() {
            const buttons = ['test-button-1', 'test-button-2', 'test-button-3'];
            let allPass = true;
            let details = [];
            
            buttons.forEach(id => {
                const btn = document.getElementById(id);
                const rect = btn.getBoundingClientRect();
                const width = rect.width;
                const height = rect.height;
                const pass = width >= 48 && height >= 48;
                
                details.push(`${id}: ${Math.round(width)}Ã—${Math.round(height)}px ${pass ? 'âœ“' : 'âœ—'}`);
                if (!pass) allPass = false;
            });
            
            const resultEl = document.getElementById('touch-target-result');
            resultEl.innerHTML = `<span class="${allPass ? 'pass' : 'fail'}">${allPass ? 'âœ“ PASS' : 'âœ— FAIL'}</span> - ${details.join(', ')}`;
            
            testResults.touchTargets = allPass ? 'PASS' : 'FAIL';
        }
        
        // å­—é«”å¤§å°æ¸¬è©¦
        function testFontSize(size) {
            document.body.className = `accessibility-font-${size}`;
            
            const testElements = document.querySelectorAll('.size-test div');
            let results = [];
            
            testElements.forEach(el => {
                const computedSize = window.getComputedStyle(el).fontSize;
                results.push(computedSize);
            });
            
            document.getElementById('font-size-result').innerHTML = 
                `<span class="pass">âœ“ PASS</span> - å­—é«”å·²åˆ‡æ›è‡³ ${size} æ¨¡å¼`;
            
            testResults.fontSize = 'PASS';
        }
        
        // èªè¨€æ¸¬è©¦
        function testLanguage(lang) {
            const translations = {
                'zh-TW': { text: 'é€™æ˜¯ç¹é«”ä¸­æ–‡æ¸¬è©¦', button: 'æ¸¬è©¦æŒ‰éˆ•' },
                'ja': { text: 'ã“ã‚Œã¯æ—¥æœ¬èªã®ãƒ†ã‚¹ãƒˆã§ã™', button: 'ãƒ†ã‚¹ãƒˆãƒœã‚¿ãƒ³' },
                'en': { text: 'This is English test', button: 'Test Button' }
            };
            
            const translation = translations[lang];
            document.getElementById('test-text').textContent = translation.text;
            document.getElementById('test-lang-button').textContent = translation.button;
            document.documentElement.lang = lang;
            
            document.getElementById('language-result').innerHTML = 
                `<span class="pass">âœ“ PASS</span> - èªè¨€å·²åˆ‡æ›è‡³ ${lang}`;
            
            testResults.language = 'PASS';
        }
        
        // èšç„¦æ¸¬è©¦
        function testFocus() {
            document.getElementById('focus-result').innerHTML = 
                `<span class="pass">âœ“ PASS</span> - è«‹æ‰‹å‹•æ¸¬è©¦ Tab éµå°èˆªï¼Œèšç„¦æŒ‡ç¤ºå™¨æ‡‰æ¸…æ™°å¯è¦‹`;
            
            testResults.focus = 'PASS';
        }
        
        // æŒä¹…åŒ–æ¸¬è©¦
        function testPersistence() {
            // æ¨¡æ“¬è¨­å®šä¿å­˜
            const testSettings = {
                highContrast: true,
                fontSize: 'large',
                language: 'ja'
            };
            
            localStorage.setItem('accessibility-settings', JSON.stringify(testSettings));
            localStorage.setItem('language-preference', 'ja');
            
            // é©—è­‰ä¿å­˜
            const saved = localStorage.getItem('accessibility-settings');
            const langSaved = localStorage.getItem('language-preference');
            
            if (saved && langSaved) {
                document.getElementById('persistence-result').innerHTML = 
                    `<span class="pass">âœ“ PASS</span> - è¨­å®šå·²æˆåŠŸä¿å­˜åˆ° localStorage`;
                testResults.persistence = 'PASS';
            } else {
                document.getElementById('persistence-result').innerHTML = 
                    `<span class="fail">âœ— FAIL</span> - è¨­å®šä¿å­˜å¤±æ•—`;
                testResults.persistence = 'FAIL';
            }
        }
        
        // æ¸…é™¤å„²å­˜
        function clearStorage() {
            localStorage.removeItem('accessibility-settings');
            localStorage.removeItem('language-preference');
            document.getElementById('persistence-result').innerHTML = 
                '<span class="partial">âš  CLEARED</span> - å„²å­˜å·²æ¸…é™¤';
        }
        
        // æ•´åˆæ¸¬è©¦
        function testIntegration() {
            // æ¸¬è©¦å¤šé …åŠŸèƒ½è¯åˆæ“ä½œ
            let issues = [];
            
            // æª¢æŸ¥ AccessibilityManager æ˜¯å¦å­˜åœ¨
            if (typeof AccessibilityManager === 'undefined') {
                issues.push('AccessibilityManager é¡åˆ¥æœªå®šç¾©');
            }
            
            // æª¢æŸ¥å¿…è¦çš„ DOM å…ƒç´ 
            const requiredElements = [
                'accessibility-toggle', 'accessibility-panel', 
                'language-select', 'font-size-select', 'high-contrast-toggle'
            ];
            
            requiredElements.forEach(id => {
                if (!document.getElementById(id)) {
                    issues.push(`å…ƒç´  #${id} ä¸å­˜åœ¨`);
                }
            });
            
            const resultEl = document.getElementById('integration-result');
            if (issues.length === 0) {
                resultEl.innerHTML = `<span class="pass">âœ“ PASS</span> - æ‰€æœ‰çµ„ä»¶æ•´åˆæ­£å¸¸`;
                testResults.integration = 'PASS';
            } else {
                resultEl.innerHTML = `<span class="fail">âœ— FAIL</span> - ç™¼ç¾å•é¡Œ: ${issues.join(', ')}`;
                testResults.integration = 'FAIL';
            }
        }
        
        // åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
        function runAllTests() {
            testContrast();
            testTouchTargets();
            testFontSize('standard');
            testLanguage('zh-TW');
            testFocus();
            testPersistence();
            testIntegration();
            
            setTimeout(generateReport, 500);
        }
        
        // ç”Ÿæˆæ¸¬è©¦å ±å‘Š
        function generateReport() {
            const totalTests = Object.keys(testResults).length;
            const passedTests = Object.values(testResults).filter(r => r === 'PASS').length;
            const passRate = totalTests > 0 ? Math.round((passedTests / totalTests) * 100) : 0;
            
            const summaryEl = document.getElementById('summary-content');
            summaryEl.innerHTML = `
                <h3>æ¸¬è©¦å®Œæˆ</h3>
                <p><strong>ç¸½æ¸¬è©¦é …ç›®ï¼š</strong>${totalTests}</p>
                <p><strong>é€šéé …ç›®ï¼š</strong>${passedTests}</p>
                <p><strong>é€šéç‡ï¼š</strong>${passRate}%</p>
                <h4>è©³ç´°çµæœï¼š</h4>
                <ul>
                    ${Object.entries(testResults).map(([test, result]) => 
                        `<li>${test}: <span class="${result.toLowerCase()}">${result}</span></li>`
                    ).join('')}
                </ul>
                <p><strong>å»ºè­°ï¼š</strong>${passRate >= 80 ? 'åŠŸèƒ½å¯¦ç¾è‰¯å¥½ï¼Œå¯é€²è¡Œä¸‹ä¸€éšæ®µæ¸¬è©¦' : 'éœ€è¦ä¿®å¾©å¤±æ•—çš„æ¸¬è©¦é …ç›®'}</p>
            `;
        }
        
        // é‡ç½®æ¸¬è©¦
        function resetTests() {
            testResults = {};
            document.querySelectorAll('.test-result').forEach(el => {
                el.textContent = 'ç­‰å¾…æ¸¬è©¦...';
            });
            document.getElementById('summary-content').innerHTML = '<p>åŸ·è¡Œæ¸¬è©¦ä»¥æŸ¥çœ‹çµæœ...</p>';
            document.body.className = '';
        }
        
        // é é¢è¼‰å…¥å¾Œè‡ªå‹•åŸ·è¡ŒåŸºæœ¬æ¸¬è©¦
        window.addEventListener('load', () => {
            console.log('ğŸ§ª å¯ç”¨æ€§æ¸¬è©¦é é¢å·²è¼‰å…¥');
            // å¯ä»¥åœ¨é€™è£¡è‡ªå‹•åŸ·è¡Œä¸€äº›åŸºæœ¬æ¸¬è©¦
        });
    </script>
</body>
</html>