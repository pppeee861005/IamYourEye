<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>è€èŠ±çœ¼æ•‘æ˜Ÿ</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Tesseract.js for OCR -->
    <script src="https://unpkg.com/tesseract.js@5.0.4/dist/tesseract.min.js"></script>

    <!-- å„ªå…ˆè¼‰å…¥ Gemini èŠå¤©ç›¸é—œè…³æœ¬ -->
    <script src="./js/config.js"></script> <!-- config.js ä¸å†æ˜¯æ¨¡çµ„ -->
    <script src="./js/env-loader.js"></script> <!-- å¼•å…¥ env-loader.js -->
    <script src="./js/gemini-chat.js"></script> <!-- Gemini AI èŠå¤©åŠŸèƒ½ -->

    <!-- å»¶é²è¼‰å…¥æ¨¡çµ„è…³æœ¬ï¼Œé¿å…æ™‚æ©Ÿè¡çª -->
    <script type="module" src="js/main.js"></script>
    <script type="module" src="./js/story-generator.js"></script>
</head>
<body>
    <!-- èªè¨€åˆ‡æ›å™¨ -->
    <div class="language-switcher">
        <button id="lang-zh" class="lang-btn active" data-lang="zh-TW" aria-label="ç¹é«”ä¸­æ–‡">ç¹</button>
        <button id="lang-en" class="lang-btn" data-lang="en" aria-label="English">EN</button>
        <button id="lang-ja" class="lang-btn" data-lang="ja" aria-label="æ—¥æœ¬èª">æ—¥</button>
    </div>

    <!-- ä¸»å®¹å™¨ - èªç¾©åŒ–HTMLçµæ§‹ -->
    <main class="app-container" role="main">
        
        <!-- AIå•å€™å€åŸŸ -->
        <header class="greeting-section">
            <h1 class="app-title" data-i18n="app-title">ğŸ˜Š è€èŠ±çœ¼æ•‘æ˜Ÿ</h1>
            <div class="ai-greeting" id="ai-greeting">
                <div class="greeting-text" data-i18n="greeting-text">æ‚¨å¥½ï¼æˆ‘æ˜¯å°å®‰ï¼Œæ‚¨çš„è²¼å¿ƒåŠ©æ‰‹ ğŸ˜Š</div>
                <div class="greeting-question" data-i18n="greeting-question">è«‹å•æˆ‘è©²æ€éº¼ç¨±å‘¼æ‚¨å‘¢ï¼Ÿ</div>
                <div class="user-preference" id="user-preference">
                    <button class="preference-btn" id="grandpa-btn" aria-label="é¸æ“‡çˆºçˆºç¨±è¬‚" data-i18n="grandpa-btn">çˆºçˆº</button>
                    <button class="preference-btn" id="grandma-btn" aria-label="é¸æ“‡å¥¶å¥¶ç¨±è¬‚" data-i18n="grandma-btn">å¥¶å¥¶</button>
                </div>
            </div>
        </header>

        <!-- è§’è‰²æŒ‡ç¤ºå™¨ -->
        <div id="role-indicator" class="role-indicator" style="display: none;">
            <div class="role-indicator-content">
                <span class="role-icon">ğŸ˜Š</span>
                <span class="role-name" data-i18n="role-name">å°å®‰æ­£åœ¨å”åŠ©æ‚¨</span>
            </div>
        </div>


        <!-- æ ¸å¿ƒåŠŸèƒ½å…¥å£å€åŸŸ -->
        <section class="main-interactions">
            <div class="interactions-container">
                <!-- ä¸Šå‚³ç…§ç‰‡åŠŸèƒ½ -->
                <div class="interaction-item">
                    <label for="photo-upload" class="primary-btn" role="button" tabindex="0" aria-label="ä¸Šå‚³ç…§ç‰‡é€²è¡Œæ–‡å­—è­˜åˆ¥" data-i18n="upload-btn">
                        ğŸ“· ä¸Šå‚³ç…§ç‰‡
                        <input type="file" id="photo-upload" class="file-input" accept="image/*" aria-describedby="upload-desc">
                    </label>
                    <p class="interaction-desc" id="upload-desc" data-i18n="upload-desc">ä¸Šå‚³åœ–ç‰‡ï¼Œå°å®‰æœƒå¹«æ‚¨è­˜åˆ¥æ–‡å­—å…§å®¹</p>
                </div>



                <!-- æ•…äº‹ç”Ÿæˆå™¨åŠŸèƒ½ -->
                <div class="interaction-item">
                    <label for="story-text-input" class="input-label" data-i18n="story-label">ğŸ“– æ•…äº‹ç”Ÿæˆå™¨</label>
                    <textarea
                        id="story-text-input"
                        class="text-input"
                        placeholder="è¼¸å…¥æ–‡å­—å…§å®¹ï¼Œå°å®‰æœƒç‚ºæ‚¨ç”Ÿæˆæº«é¦¨æ•…äº‹..."
                        rows="3"
                        maxlength="1000"
                        aria-describedby="story-desc"
                        data-i18n-placeholder="story-placeholder">
                    </textarea>
                    <p class="interaction-desc" id="story-desc" data-i18n="story-desc">è®“å°å®‰å°‡è¤‡é›œæ–‡å­—è½‰åŒ–ç‚ºæº«é¦¨æ˜“æ‡‚çš„æ•…äº‹</p>
                    <button class="primary-btn" id="generate-story-btn" aria-label="ç”Ÿæˆæ•…äº‹" data-i18n="generate-btn">
                        ğŸ“– ç”Ÿæˆæ•…äº‹
                    </button>
                </div>
            </div>
        </section>

        <!-- OCR çµæœé¡¯ç¤ºå€åŸŸ -->
        <section id="ocr-result-area" class="ocr-result-area" style="display: none;" aria-live="polite">
            <div class="ocr-result-header">
                <h3 data-i18n="ocr-result-title">ğŸ“ è­˜åˆ¥çµæœ</h3>
                <button id="ocr-result-close" class="close-btn" aria-label="é—œé–‰è­˜åˆ¥çµæœ">âœ•</button>
            </div>
            <div class="ocr-result-content">
                <div id="ocr-result-text" class="ocr-result-text"></div>
                <div class="ocr-result-actions">
                    <button id="copy-result-btn" class="action-btn" aria-label="è¤‡è£½è­˜åˆ¥çµæœ" data-i18n="copy-btn">
                        ğŸ“‹ è¤‡è£½
                    </button>
                </div>
            </div>
        </section>

        <!-- æ•…äº‹çµæœé¡¯ç¤ºå€åŸŸ -->
        <section id="story-result-area" class="story-result-area" style="display: none;" aria-live="polite">
            <div class="story-result-header">
                <h3 data-i18n="story-result-title">ğŸ“– ç”Ÿæˆçš„æ•…äº‹</h3>
                <button id="story-result-close" class="close-btn" aria-label="é—œé–‰æ•…äº‹çµæœ">âœ•</button>
            </div>
            <div class="story-result-content">
                <div id="story-content" class="story-content"></div>
                <div class="story-result-actions">
                    <button id="read-story-aloud-btn" class="action-btn" aria-label="æœ—è®€æ•…äº‹" data-i18n="read-aloud-btn">
                        ğŸ”Š æœ—è®€
                    </button>
                    <button id="copy-story-btn" class="action-btn" aria-label="è¤‡è£½æ•…äº‹" data-i18n="copy-btn">
                        ğŸ“‹ è¤‡è£½
                    </button>
                    <button id="send-story-to-chat-btn" class="action-btn" aria-label="ç™¼é€åˆ°å°è©±" data-i18n="send-to-chat-btn">
                        ğŸ’¬ ç™¼é€åˆ°å°è©±
                    </button>
                </div>
            </div>
        </section>



        <!-- è¼‰å…¥æŒ‡ç¤ºå™¨ -->
        <div id="loading-indicator" class="loading-indicator" style="display: none;" aria-live="polite">
            <div class="loading-spinner" aria-hidden="true"></div>
            <div class="loading-text" data-i18n="loading-text">å°å®‰æ­£åœ¨è™•ç†ä¸­...</div>
        </div>

        <!-- Gemini AI èŠå¤©æ©Ÿå™¨äººç•Œé¢ -->
        <section class="chatbot-section">
            <div class="chat-container">
                <div class="chat-header">
                    <h1 data-i18n="chat-title">Gemini AI èŠå¤©</h1>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <!-- èŠå¤©è¨Šæ¯å°‡åœ¨æ­¤è™•é¡¯ç¤º -->
                </div>
                <div class="chat-input">
                    <input type="text" id="user-input" placeholder="è¼¸å…¥æ‚¨çš„è¨Šæ¯..." data-i18n-placeholder="chat-placeholder">
                    <button id="send-button" data-i18n="send-btn">ç™¼é€</button>
                </div>
            </div>
        </section>

    </main>

    <!-- é é¢åº•éƒ¨ç‰ˆæœ¬è³‡è¨Š -->
    <footer class="app-footer" style="text-align: center; padding: 20px; background-color: #f8f9fa; border-top: 1px solid #dee2e6; margin-top: 40px;">
        <div class="version-info" style="font-size: 0.85em; color: #6c757d;">
            <div style="margin-bottom: 8px;">
                <strong id="app-name" data-i18n="app-name">è€èŠ±çœ¼æ•‘æ˜Ÿ</strong> v<span id="app-version">1.0.4</span>
                <span style="font-size: 0.8em; color: #9ca3af;">(å»ºç½®: <span id="build-date">2025-09-08</span>)</span>
            </div>
            <div style="font-size: 0.8em; margin-bottom: 8px;">
                æ¨¡çµ„ç‰ˆæœ¬:
                <span id="module-versions">
                    Gemini Chat v<span id="gemini-version">1.0.1</span> |
                    OCR è™•ç†å™¨ v<span id="ocr-version">1.0.1</span> |
                    ä¸»æ‡‰ç”¨ v<span id="main-version">1.0.1</span> |
                    æ—¥èªŒç³»çµ± v<span id="logger-version">1.0.1</span>
                </span>
            </div>
            <!-- ç‰ˆæœ¬æ›´æ–°: v1.0.4 - æ–°å¢ä¸­è‹±æ—¥èªè¨€åˆ‡æ›åŠŸèƒ½ (2025/09/08) -->
            <div style="font-size: 0.75em; margin-bottom: 8px;">
                <span data-i18n="features-label">åŠŸèƒ½æ¨¡çµ„:</span> <span id="features-list">è¼‰å…¥ä¸­...</span>
            </div>
            <div style="font-size: 0.75em; margin-bottom: 8px; color: #6c757d;">
                é è¨­å°è©±èªè¨€: ç¹é«”ä¸­æ–‡ (æ”¯æ´ä¸­è‹±æ—¥èªè¨€åˆ‡æ›)
            </div>
            <div style="font-size: 0.75em; color: #9ca3af;">
                Â© 2025 <span data-i18n="copyright">è€èŠ±çœ¼æ•‘æ˜Ÿ - å°ˆç‚ºé•·è€…è¨­è¨ˆçš„æ™ºæ…§åŠ©æ‰‹</span>
                <button id="show-diagnostics" style="margin-left: 10px; padding: 2px 8px; font-size: 0.7em; background: #e9ecef; border: 1px solid #dee2e6; border-radius: 3px; cursor: pointer;" title="é¡¯ç¤ºç³»çµ±è¨ºæ–·è³‡è¨Š" data-i18n="diagnostics-btn">è¨ºæ–·</button>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script type="module">
        // æ‰€æœ‰æ¨¡çµ„å·²è‡ªå‹•è¼‰å…¥ .env é…ç½®ä¸¦åˆå§‹åŒ–
    </script>

    <!-- èªè¨€åˆ‡æ›å’Œåœ‹éš›åŒ–è…³æœ¬ -->
    <script>
        // èªè¨€åŒ…
        const translations = {
            'zh-TW': {
                'app-title': 'ğŸ˜Š è€èŠ±çœ¼æ•‘æ˜Ÿ',
                'greeting-text': 'æ‚¨å¥½ï¼æˆ‘æ˜¯å°å®‰ï¼Œæ‚¨çš„è²¼å¿ƒåŠ©æ‰‹ ğŸ˜Š',
                'greeting-question': 'è«‹å•æˆ‘è©²æ€éº¼ç¨±å‘¼æ‚¨å‘¢ï¼Ÿ',
                'grandpa-btn': 'çˆºçˆº',
                'grandma-btn': 'å¥¶å¥¶',
                'upload-btn': 'ğŸ“· ä¸Šå‚³ç…§ç‰‡',
                'upload-desc': 'ä¸Šå‚³åœ–ç‰‡ï¼Œå°å®‰æœƒå¹«æ‚¨è­˜åˆ¥æ–‡å­—å…§å®¹',
                'story-label': 'ğŸ“– æ•…äº‹ç”Ÿæˆå™¨',
                'story-placeholder': 'è¼¸å…¥æ–‡å­—å…§å®¹ï¼Œå°å®‰æœƒç‚ºæ‚¨ç”Ÿæˆæº«é¦¨æ•…äº‹...',
                'story-desc': 'è®“å°å®‰å°‡è¤‡é›œæ–‡å­—è½‰åŒ–ç‚ºæº«é¦¨æ˜“æ‡‚çš„æ•…äº‹',
                'generate-btn': 'ğŸ“– ç”Ÿæˆæ•…äº‹',
                'ocr-result-title': 'ğŸ“ è­˜åˆ¥çµæœ',
                'story-result-title': 'ğŸ“– ç”Ÿæˆçš„æ•…äº‹',
                'copy-btn': 'ğŸ“‹ è¤‡è£½',
                'read-aloud-btn': 'ğŸ”Š æœ—è®€',
                'send-to-chat-btn': 'ğŸ’¬ ç™¼é€åˆ°å°è©±',
                'loading-text': 'å°å®‰æ­£åœ¨è™•ç†ä¸­...',
                'chat-title': 'Gemini AI èŠå¤©',
                'chat-placeholder': 'è¼¸å…¥æ‚¨çš„è¨Šæ¯...',
                'send-btn': 'ç™¼é€',
                'app-name': 'è€èŠ±çœ¼æ•‘æ˜Ÿ',

                'features-label': 'åŠŸèƒ½æ¨¡çµ„:',
                'copyright': 'è€èŠ±çœ¼æ•‘æ˜Ÿ - å°ˆç‚ºé•·è€…è¨­è¨ˆçš„æ™ºæ…§åŠ©æ‰‹',
                'diagnostics-btn': 'è¨ºæ–·',
                'role-name': 'å°å®‰æ­£åœ¨å”åŠ©æ‚¨'
            },
            'en': {
                'app-title': 'ğŸ˜Š Eye Helper',
                'greeting-text': 'Hello! I\'m Xiao An, your caring assistant ğŸ˜Š',
                'greeting-question': 'How should I address you?',
                'grandpa-btn': 'Grandpa',
                'grandma-btn': 'Grandma',
                'upload-btn': 'ğŸ“· Upload Photo',
                'upload-desc': 'Upload an image, and Xiao An will help you recognize the text',
                'story-label': 'ğŸ“– Story Generator',
                'story-placeholder': 'Enter text content, and Xiao An will generate a heartwarming story for you...',
                'story-desc': 'Let Xiao An transform complex text into a warm and easy-to-understand story',
                'generate-btn': 'ğŸ“– Generate Story',
                'ocr-result-title': 'ğŸ“ Recognition Result',
                'story-result-title': 'ğŸ“– Generated Story',
                'copy-btn': 'ğŸ“‹ Copy',
                'read-aloud-btn': 'ğŸ”Š Read Aloud',
                'send-to-chat-btn': 'ğŸ’¬ Send to Chat',
                'loading-text': 'Xiao An is processing...',
                'chat-title': 'Gemini AI Chat',
                'chat-placeholder': 'Enter your message...',
                'send-btn': 'Send',
                'app-name': 'Eye Helper',

                'features-label': 'Features:',
                'copyright': 'Eye Helper - Smart Assistant Designed for Seniors',
                'diagnostics-btn': 'Diagnostics',
                'role-name': 'Xiao An is assisting you'
            },
            'ja': {
                'app-title': 'ğŸ˜Š è€çœ¼ã‚µãƒãƒ¼ãƒˆ',
                'greeting-text': 'ã“ã‚“ã«ã¡ã¯ï¼ç§ã¯å°å®‰ã€ã‚ãªãŸã®å„ªã—ã„ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ ğŸ˜Š',
                'greeting-question': 'ã©ã®ã‚ˆã†ã«ãŠå‘¼ã³ã™ã‚Œã°ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ',
                'grandpa-btn': 'ãŠã˜ã„ã¡ã‚ƒã‚“',
                'grandma-btn': 'ãŠã°ã‚ã¡ã‚ƒã‚“',
                'upload-btn': 'ğŸ“· å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
                'upload-desc': 'ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€å°å®‰ãŒæ–‡å­—ã‚’èªè­˜ã—ã¾ã™',
                'story-label': 'ğŸ“– ãŠè©±ç”Ÿæˆå™¨',
                'story-placeholder': 'ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã™ã‚‹ã¨ã€å°å®‰ãŒæ¸©ã‹ã„ãŠè©±ã‚’ç”Ÿæˆã—ã¾ã™...',
                'story-desc': 'å°å®‰ã«è¤‡é›‘ãªãƒ†ã‚­ã‚¹ãƒˆã‚’æ¸©ã‹ãã‚ã‹ã‚Šã‚„ã™ã„ãŠè©±ã«å¤‰æ›ã—ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†',
                'generate-btn': 'ğŸ“– ãŠè©±ã‚’ç”Ÿæˆ',
                'ocr-result-title': 'ğŸ“ èªè­˜çµæœ',
                'story-result-title': 'ğŸ“– ç”Ÿæˆã•ã‚ŒãŸãŠè©±',
                'copy-btn': 'ğŸ“‹ ã‚³ãƒ”ãƒ¼',
                'read-aloud-btn': 'ğŸ”Š èª­ã¿ä¸Šã’',
                'send-to-chat-btn': 'ğŸ’¬ ãƒãƒ£ãƒƒãƒˆã«é€ä¿¡',
                'loading-text': 'å°å®‰ãŒå‡¦ç†ä¸­...',
                'chat-title': 'Gemini AI ãƒãƒ£ãƒƒãƒˆ',
                'chat-placeholder': 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...',
                'send-btn': 'é€ä¿¡',
                'app-name': 'è€çœ¼ã‚µãƒãƒ¼ãƒˆ',

                'features-label': 'æ©Ÿèƒ½ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«:',
                'copyright': 'è€çœ¼ã‚µãƒãƒ¼ãƒˆ - é«˜é½¢è€…å‘ã‘ã«è¨­è¨ˆã•ã‚ŒãŸã‚¹ãƒãƒ¼ãƒˆã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ',
                'diagnostics-btn': 'è¨ºæ–­',
                'role-name': 'å°å®‰ãŒãŠæ‰‹ä¼ã„ã—ã¦ã„ã¾ã™'
            }
        };

        // ç•¶å‰èªè¨€
        let currentLang = 'zh-TW';

        // èªè¨€åˆ‡æ›åŠŸèƒ½
        function switchLanguage(lang) {
            currentLang = lang;
            document.documentElement.lang = lang;
            
            // æ›´æ–°æ‰€æœ‰å¸¶æœ‰ data-i18n å±¬æ€§çš„å…ƒç´ 
            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            // æ›´æ–° placeholder
            const placeholders = document.querySelectorAll('[data-i18n-placeholder]');
            placeholders.forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });

            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`lang-${lang.split('-')[0]}`).classList.add('active');

            // å„²å­˜èªè¨€åå¥½åˆ° localStorage
            localStorage.setItem('preferred-language', lang);
        }

        // åˆå§‹åŒ–èªè¨€åˆ‡æ›å™¨
        function initLanguageSwitcher() {
            // å¾ localStorage è¼‰å…¥åå¥½èªè¨€
            const savedLang = localStorage.getItem('preferred-language');
            if (savedLang && translations[savedLang]) {
                switchLanguage(savedLang);
            }

            // ç¶å®šèªè¨€åˆ‡æ›æŒ‰éˆ•äº‹ä»¶
            document.getElementById('lang-zh').addEventListener('click', () => switchLanguage('zh-TW'));
            document.getElementById('lang-en').addEventListener('click', () => switchLanguage('en'));
            document.getElementById('lang-ja').addEventListener('click', () => switchLanguage('ja'));
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initLanguageSwitcher);
    </script>

    <!-- ç‰ˆæœ¬è³‡è¨Šæ›´æ–°è…³æœ¬ -->
    <script>
        // æ›´æ–°ç‰ˆæœ¬é¡¯ç¤º
        function updateVersionDisplay() {
            if (window.APP_CONFIG) {
                // æ›´æ–°åŸºæœ¬è³‡è¨Š
                const appNameElement = document.getElementById('app-name');
                if (appNameElement) {
                    appNameElement.textContent = window.APP_CONFIG.APP_NAME || translations[currentLang]['app-name'];
                }
                document.getElementById('app-version').textContent = window.APP_CONFIG.APP_VERSION || '1.0.0';
                document.getElementById('build-date').textContent = window.APP_CONFIG.BUILD_DATE || 'æœªçŸ¥';

                // æ›´æ–°æ¨¡çµ„ç‰ˆæœ¬
                const versions = window.APP_CONFIG.MODULE_VERSIONS || {};
                document.getElementById('gemini-version').textContent = versions.gemini_chat || '1.0.0';
                document.getElementById('ocr-version').textContent = versions.ocr_processor || '1.0.0';
                document.getElementById('main-version').textContent = versions.main_app || '1.0.0';
                document.getElementById('logger-version').textContent = versions.logger || '1.0.0';

                // æ›´æ–°åŠŸèƒ½åˆ—è¡¨
                const features = window.APP_CONFIG.FEATURES || [];
                document.getElementById('features-list').textContent = features.join('ã€') || 'è¼‰å…¥ä¸­...';

                // è¨­å®šè¨ºæ–·æŒ‰éˆ•
                setupDiagnosticsButton();
            }
        }

        // è¨­å®šè¨ºæ–·æŒ‰éˆ•åŠŸèƒ½
        function setupDiagnosticsButton() {
            const diagnosticsBtn = document.getElementById('show-diagnostics');
            if (diagnosticsBtn) {
                diagnosticsBtn.addEventListener('click', function() {
                    showDiagnostics();
                });
            }
        }

        // é¡¯ç¤ºç³»çµ±è¨ºæ–·è³‡è¨Š
        function showDiagnostics() {
            if (window.logger && window.logger.diagnose) {
                const diagnosis = window.logger.diagnose();

                // é¡¯ç¤ºè©³ç´°è¨ºæ–·è³‡è¨Š
                console.log('=== ç³»çµ±è¨ºæ–·å ±å‘Š ===');
                console.log('ç‰ˆæœ¬è³‡è¨Š:', window.APP_CONFIG.getFullVersionInfo());
                console.log('åŠŸèƒ½ç‹€æ…‹:', window.APP_CONFIG.FEATURES_ENABLED);
                console.log('æ•ˆèƒ½è¨­å®š:', window.APP_CONFIG.PERFORMANCE);

                // é¡¯ç¤ºæ—¥èªŒçµ±è¨ˆ
                if (window.logger.showLogSummary) {
                    window.logger.showLogSummary();
                }

                alert(`ç³»çµ±è¨ºæ–·å®Œæˆï¼\n\nç‰ˆæœ¬: ${window.APP_CONFIG.APP_VERSION}\nå»ºç½®æ—¥æœŸ: ${window.APP_CONFIG.BUILD_DATE}\n\nè©³ç´°è³‡è¨Šè«‹æŸ¥çœ‹ç€è¦½å™¨æ§åˆ¶å° (F12)`);
            } else {
                alert('æ—¥èªŒç³»çµ±å°šæœªè¼‰å…¥ï¼Œè«‹ç¨å¾Œå†è©¦');
            }
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œæ›´æ–°ç‰ˆæœ¬è³‡è¨Š
        document.addEventListener('DOMContentLoaded', function() {
            // å»¶é²åŸ·è¡Œä»¥ç¢ºä¿é…ç½®å·²è¼‰å…¥
            setTimeout(updateVersionDisplay, 100);
        });

        // å¦‚æœé…ç½®å¾Œè¼‰å…¥ï¼Œä¹Ÿè¦æ›´æ–°ç‰ˆæœ¬
        window.addEventListener('load', function() {
            setTimeout(updateVersionDisplay, 500);
        });

        // ç›£è½é…ç½®è¼‰å…¥äº‹ä»¶
        window.addEventListener('APP_CONFIG_LOADED', updateVersionDisplay);
    </script>
</body>
</html>
